<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Metadata Broker: mdb/connection.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="axis-logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Metadata Broker
   &#160;<span id="projectnumber">0.26.5</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_157f1fd8a7cadef2cbcf31e1f5adfeae.html">mdb</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">connection.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &quot;<a class="el" href="error_8h_source.html">mdb/error.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for connection.h:</div>
<div class="dyncontent">
<div class="center"><img src="connection_8h__incl.png" border="0" usemap="#amdb_2connection_8h" alt=""/></div>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="connection_8h__dep__incl.png" border="0" usemap="#amdb_2connection_8hdep" alt=""/></div>
</div>
</div>
<p><a href="connection_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a699ef9a88cc82008d70f5e67002834bb"><td class="memItemLeft" align="right" valign="top">typedef struct mdb_connection&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="connection_8h.html#a699ef9a88cc82008d70f5e67002834bb">mdb_connection_t</a></td></tr>
<tr class="separator:a699ef9a88cc82008d70f5e67002834bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a88feada28988a46c292d56e94e075a0f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="connection_8h.html#a699ef9a88cc82008d70f5e67002834bb">mdb_connection_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="connection_8h.html#a88feada28988a46c292d56e94e075a0f">mdb_connection_create</a> (<a class="el" href="error_8h.html#a2b25991a21a868fa8d89c0d75c6862d1">mdb_on_error_t</a> on_error, void *user_data, <a class="el" href="structmdb__error__t.html">mdb_error_t</a> **error)</td></tr>
<tr class="separator:a88feada28988a46c292d56e94e075a0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab720a235e474e720e0591a3beabe72d8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="connection_8h.html#ab720a235e474e720e0591a3beabe72d8">mdb_connection_destroy</a> (<a class="el" href="connection_8h.html#a699ef9a88cc82008d70f5e67002834bb">mdb_connection_t</a> **self)</td></tr>
<tr class="separator:ab720a235e474e720e0591a3beabe72d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Copyright Axis Communications AB</p>
<p>This is the connection header for the Metadata Broker client library. It implements functionality to connect to the broker.</p>
<p>The connection is a shared resource that can be used by one or several channels and subscribers for communication with the broker. </p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="a699ef9a88cc82008d70f5e67002834bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a699ef9a88cc82008d70f5e67002834bb">&#9670;&nbsp;</a></span>mdb_connection_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct mdb_connection <a class="el" href="connection_8h.html#a699ef9a88cc82008d70f5e67002834bb">mdb_connection_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A connection is a context used to hold the state of the connection to the Metadata Broker.</p>
<p>The connection may be used/shared by multiple channels and subscribers. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a88feada28988a46c292d56e94e075a0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88feada28988a46c292d56e94e075a0f">&#9670;&nbsp;</a></span>mdb_connection_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="connection_8h.html#a699ef9a88cc82008d70f5e67002834bb">mdb_connection_t</a>* mdb_connection_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="error_8h.html#a2b25991a21a868fa8d89c0d75c6862d1">mdb_on_error_t</a>&#160;</td>
          <td class="paramname"><em>on_error</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmdb__error__t.html">mdb_error_t</a> **&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a metadata connection.</p>
<p>Any errors delivered via the provided callback are fatal to the connection and affects all users of the connection. Users of the connection and the connection itself need to be destroyed and recreated. Most subsequent calls to a library function will return the error generated via on_error on subsequent calls.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">on_error</td><td>Will be called if any asynchronous error occurs during the lifecycle of the returned connection. Can be set to NULL. </td></tr>
    <tr><td class="paramname">user_data</td><td>Optional user data, will be argument to the callback on_error. </td></tr>
    <tr><td class="paramname">error</td><td>An <a class="el" href="structmdb__error__t.html">mdb_error_t</a> pointer reference or NULL. An <a class="el" href="structmdb__error__t.html">mdb_error_t</a> will be allocated on failure and must then be destroyed with <a class="el" href="error_8h.html#ac9429cca32c506161c9dbe2a0568287e">mdb_error_destroy()</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Connection on success, NULL on failure. </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="consumer_2main_8c-example.html#a7">consumer/main.c</a>.</dd>
</dl>

</div>
</div>
<a id="ab720a235e474e720e0591a3beabe72d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab720a235e474e720e0591a3beabe72d8">&#9670;&nbsp;</a></span>mdb_connection_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mdb_connection_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="connection_8h.html#a699ef9a88cc82008d70f5e67002834bb">mdb_connection_t</a> **&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destroy given connection.</p>
<p>Tries to wait for and flush any pending requests before freeing resources and returning.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>Connection to destroy or NULL. If connection is NULL this function will do nothing. *self will be set to NULL after this call. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="consumer_2main_8c-example.html#a13">consumer/main.c</a>.</dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Copyright &copy; 2009-2024 Axis Communications AB. All rights reserved.
</small></address>
</body>
</html>
