<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libvdo: vdo-buffer.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libvdo
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('vdo-buffer_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">vdo-buffer.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A memory buffer.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="vdo-frame_8h_source.html">vdo-frame.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for vdo-buffer.h:</div>
<div class="dyncontent">
<div class="center"><img src="vdo-buffer_8h__incl.png" border="0" usemap="#vdo-buffer_8h" alt=""/></div>
<map name="vdo-buffer_8h" id="vdo-buffer_8h">
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="vdo-buffer_8h__dep__incl.png" border="0" usemap="#vdo-buffer_8hdep" alt=""/></div>
<map name="vdo-buffer_8hdep" id="vdo-buffer_8hdep">
</map>
</div>
</div>
<p><a href="vdo-buffer_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad35e3382fa9f9bb4024af62cec90b034"><td class="memItemLeft" align="right" valign="top">VdoBuffer *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vdo-buffer_8h.html#ad35e3382fa9f9bb4024af62cec90b034">vdo_buffer_new</a> (gint fd, gsize capacity, guint64 offset, gpointer opaque)</td></tr>
<tr class="memdesc:ad35e3382fa9f9bb4024af62cec90b034"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a buffer which is owned by an external framework.  <a href="#ad35e3382fa9f9bb4024af62cec90b034">More...</a><br /></td></tr>
<tr class="separator:ad35e3382fa9f9bb4024af62cec90b034"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a097843481f6052a45fa46a6ca359750a"><td class="memItemLeft" align="right" valign="top">VdoBuffer *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vdo-buffer_8h.html#a097843481f6052a45fa46a6ca359750a">vdo_buffer_new_full</a> (gint fd, gsize capacity, guint64 offset, gpointer opaque, <a class="el" href="classVdoMap.html">VdoMap</a> *settings)</td></tr>
<tr class="memdesc:a097843481f6052a45fa46a6ca359750a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a buffer with custom buffer properties.  <a href="#a097843481f6052a45fa46a6ca359750a">More...</a><br /></td></tr>
<tr class="separator:a097843481f6052a45fa46a6ca359750a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e5ecb68a24fedece4e2b3afb0cac3a7"><td class="memItemLeft" align="right" valign="top">guint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vdo-buffer_8h.html#a5e5ecb68a24fedece4e2b3afb0cac3a7">vdo_buffer_get_id</a> (VdoBuffer *self)</td></tr>
<tr class="memdesc:a5e5ecb68a24fedece4e2b3afb0cac3a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns an id representing the <code>VdoBuffer</code>.  <a href="#a5e5ecb68a24fedece4e2b3afb0cac3a7">More...</a><br /></td></tr>
<tr class="separator:a5e5ecb68a24fedece4e2b3afb0cac3a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae10562fcb528fc9337767556d6904da8"><td class="memItemLeft" align="right" valign="top">gint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vdo-buffer_8h.html#ae10562fcb528fc9337767556d6904da8">vdo_buffer_get_fd</a> (VdoBuffer *self)</td></tr>
<tr class="memdesc:ae10562fcb528fc9337767556d6904da8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a file descriptor representing the <code>VdoBuffer</code>.  <a href="#ae10562fcb528fc9337767556d6904da8">More...</a><br /></td></tr>
<tr class="separator:ae10562fcb528fc9337767556d6904da8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00af1cf2ead704a04ca611a7a5f4213c"><td class="memItemLeft" align="right" valign="top">gint64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vdo-buffer_8h.html#a00af1cf2ead704a04ca611a7a5f4213c">vdo_buffer_get_offset</a> (VdoBuffer *self)</td></tr>
<tr class="memdesc:a00af1cf2ead704a04ca611a7a5f4213c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns file offset to the <code>VdoBuffer</code>.  <a href="#a00af1cf2ead704a04ca611a7a5f4213c">More...</a><br /></td></tr>
<tr class="separator:a00af1cf2ead704a04ca611a7a5f4213c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c5d9bc38c54bb580dab91542ddf3aa2"><td class="memItemLeft" align="right" valign="top">gsize&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vdo-buffer_8h.html#a7c5d9bc38c54bb580dab91542ddf3aa2">vdo_buffer_get_capacity</a> (VdoBuffer *self)</td></tr>
<tr class="memdesc:a7c5d9bc38c54bb580dab91542ddf3aa2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the entire buffer capacity of the <code>VdoBuffer</code>.  <a href="#a7c5d9bc38c54bb580dab91542ddf3aa2">More...</a><br /></td></tr>
<tr class="separator:a7c5d9bc38c54bb580dab91542ddf3aa2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0826cd3642b0cf662c69d84cbaaa2a0"><td class="memItemLeft" align="right" valign="top">gboolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vdo-buffer_8h.html#ab0826cd3642b0cf662c69d84cbaaa2a0">vdo_buffer_is_complete</a> (VdoBuffer *self)</td></tr>
<tr class="memdesc:ab0826cd3642b0cf662c69d84cbaaa2a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates whether the buffer is complete or not.  <a href="#ab0826cd3642b0cf662c69d84cbaaa2a0">More...</a><br /></td></tr>
<tr class="separator:ab0826cd3642b0cf662c69d84cbaaa2a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a231bbe5da68795986d481253c879bc11"><td class="memItemLeft" align="right" valign="top">gpointer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vdo-buffer_8h.html#a231bbe5da68795986d481253c879bc11">vdo_buffer_get_opaque</a> (VdoBuffer *self)</td></tr>
<tr class="memdesc:a231bbe5da68795986d481253c879bc11"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opaque pointers contain user provided custom information.  <a href="#a231bbe5da68795986d481253c879bc11">More...</a><br /></td></tr>
<tr class="separator:a231bbe5da68795986d481253c879bc11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d39e2466d23b62e52a0fbfd10a968a3"><td class="memItemLeft" align="right" valign="top">gpointer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vdo-buffer_8h.html#a3d39e2466d23b62e52a0fbfd10a968a3">vdo_buffer_get_data</a> (VdoBuffer *self)</td></tr>
<tr class="memdesc:a3d39e2466d23b62e52a0fbfd10a968a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a pointer to the underlying buffer.  <a href="#a3d39e2466d23b62e52a0fbfd10a968a3">More...</a><br /></td></tr>
<tr class="separator:a3d39e2466d23b62e52a0fbfd10a968a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5367ff8edb99976f0b22a2809d44c097"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classVdoFrame.html">VdoFrame</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vdo-buffer_8h.html#a5367ff8edb99976f0b22a2809d44c097">vdo_buffer_get_frame</a> (VdoBuffer *self)</td></tr>
<tr class="memdesc:a5367ff8edb99976f0b22a2809d44c097"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a pointer to the underlying frame.  <a href="#a5367ff8edb99976f0b22a2809d44c097">More...</a><br /></td></tr>
<tr class="separator:a5367ff8edb99976f0b22a2809d44c097"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A memory buffer. </p>
<p>Copyright (C) 2018-2019, Axis Communications AB, Lund </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a7c5d9bc38c54bb580dab91542ddf3aa2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c5d9bc38c54bb580dab91542ddf3aa2">&#9670;&nbsp;</a></span>vdo_buffer_get_capacity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gsize vdo_buffer_get_capacity </td>
          <td>(</td>
          <td class="paramtype">VdoBuffer *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the entire buffer capacity of the <code>VdoBuffer</code>. </p>
<p>For alignment purposes the buffer may be larger than requested.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>A VdoBuffer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Capacity of the buffer in bytes. </dd></dl>

</div>
</div>
<a id="a3d39e2466d23b62e52a0fbfd10a968a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d39e2466d23b62e52a0fbfd10a968a3">&#9670;&nbsp;</a></span>vdo_buffer_get_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gpointer vdo_buffer_get_data </td>
          <td>(</td>
          <td class="paramtype">VdoBuffer *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a pointer to the underlying buffer. </p>
<p>Beware this pointer is only valid for as long as the VdoBuffer itself is valid.</p>
<p>The layout of the data depends on the <a class="el" href="vdo-types_8h.html#a5ed136c302573571bf325c39d6d36246" title="Video formats. ">VdoFormat</a> and <a class="el" href="vdo-types_8h.html#aecc7ad4ae90e505eea73c35dd4dd5bdd" title="Video frame types. ">VdoFrameType</a>. For H.26x this is always Annex B with long start-code <code>0x00000001</code>.</p>
<p>For example a single <code>VdoBuffer</code> with format <a class="el" href="vdo-types_8h.html#aecc7ad4ae90e505eea73c35dd4dd5bdda2ded56d42ad2a351c83248f5ae35982d">VDO_FRAME_TYPE_H265_IDR</a> might contain [NAL_VPS][NAL_SPS][NAL_PPS][IDR-Slice].</p>
<p>In the above example <a class="el" href="vdo-frame_8h.html#a7d465baa94a94919b0090a18ff71f418" title="Returns the size of any H264/H265 headers contained in this frame. ">vdo_frame_get_header_size</a> is the byte offset to the IDR-Slice.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>A VdoBuffer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the buffer data or <code>NULL</code> if allocation failed. </dd></dl>

</div>
</div>
<a id="ae10562fcb528fc9337767556d6904da8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae10562fcb528fc9337767556d6904da8">&#9670;&nbsp;</a></span>vdo_buffer_get_fd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gint vdo_buffer_get_fd </td>
          <td>(</td>
          <td class="paramtype">VdoBuffer *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a file descriptor representing the <code>VdoBuffer</code>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>A VdoBuffer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A file descriptor or -1 on error. </dd></dl>

</div>
</div>
<a id="a5367ff8edb99976f0b22a2809d44c097"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5367ff8edb99976f0b22a2809d44c097">&#9670;&nbsp;</a></span>vdo_buffer_get_frame()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classVdoFrame.html">VdoFrame</a>* vdo_buffer_get_frame </td>
          <td>(</td>
          <td class="paramtype">VdoBuffer *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a pointer to the underlying frame. </p>
<p>Beware this pointer is only valid for as long as the VdoBuffer itself is valid.</p>
<div class="fragment"><div class="line"><span class="keywordflow">while</span> (1) {</div><div class="line">    VdoBuffer *buffer = <a class="code" href="vdo-stream_8h.html#a021f68451699a9ca04aa0e67d9b2917e">vdo_stream_get_buffer</a>(stream, &amp;error);</div><div class="line">    <a class="code" href="classVdoFrame.html">VdoFrame</a>  *frame  = <a class="code" href="vdo-buffer_8h.html#a5367ff8edb99976f0b22a2809d44c097">vdo_buffer_get_frame</a>(buffer);</div><div class="line">    <span class="keywordflow">if</span> (!frame) { <span class="comment">// An error occurred</span></div><div class="line">        <span class="comment">// Only log unexpected errors (ignore server maintenance etc.)</span></div><div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="vdo-error_8h.html#ac748fae792da6c96a4cba4619a3a3d90">vdo_error_is_expected</a>(&amp;error))</div><div class="line">            fprintf(stderr, <span class="stringliteral">&quot;%s\n&quot;</span>, err-&gt;message);</div><div class="line">        <span class="comment">// Exit and try to create a new stream</span></div><div class="line">        <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Extract the timestamp from the frame</span></div><div class="line">    uint64_t timestamp = <a class="code" href="vdo-frame_8h.html#a4d44c7416b076907f288473de1ba2f21">vdo_frame_get_timestamp</a>(frame);</div><div class="line"></div><div class="line">    g_object_unref(buffer); <span class="comment">// Both &#39;buffer&#39; and &#39;frame&#39; are now invalid</span></div><div class="line">}</div></div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>A VdoBuffer or <code>NULL</code> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the frame or <code>NULL</code> if <code>self</code> was <code>NULL</code> </dd></dl>

</div>
</div>
<a id="a5e5ecb68a24fedece4e2b3afb0cac3a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e5ecb68a24fedece4e2b3afb0cac3a7">&#9670;&nbsp;</a></span>vdo_buffer_get_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">guint32 vdo_buffer_get_id </td>
          <td>(</td>
          <td class="paramtype">VdoBuffer *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns an id representing the <code>VdoBuffer</code>. </p>
<p>The id is not guaranteed to be globally unique.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>A VdoBuffer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The id. </dd></dl>

</div>
</div>
<a id="a00af1cf2ead704a04ca611a7a5f4213c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00af1cf2ead704a04ca611a7a5f4213c">&#9670;&nbsp;</a></span>vdo_buffer_get_offset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gint64 vdo_buffer_get_offset </td>
          <td>(</td>
          <td class="paramtype">VdoBuffer *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns file offset to the <code>VdoBuffer</code>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>A VdoBuffer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The file offset. </dd></dl>

</div>
</div>
<a id="a231bbe5da68795986d481253c879bc11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a231bbe5da68795986d481253c879bc11">&#9670;&nbsp;</a></span>vdo_buffer_get_opaque()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gpointer vdo_buffer_get_opaque </td>
          <td>(</td>
          <td class="paramtype">VdoBuffer *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opaque pointers contain user provided custom information. </p>
<p>The opaque pointer has no predefined meaning inside the vdo framework itself, it is meant to facilitate interoperability with other existing frameworks as well as caching the buffer data pointer(see vdo_buffer_get_data).</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line">  gpointer buffer_data;</div><div class="line">  <span class="keywordtype">size_t</span>   framework_data;</div><div class="line">} external_framework_t;</div><div class="line"></div><div class="line"><span class="comment">// Allocate and Enqueue a Buffer</span></div><div class="line">external_framework_t *opaque_in = g_new0(external_framework_t, 1);</div><div class="line">VdoBuffer *buffer_in = <a class="code" href="vdo-stream_8h.html#a18ff54d35650a8fa4a00da2198b4b2d3">vdo_stream_buffer_alloc</a>(stream, opaque_in, NULL);</div><div class="line">opaque_in-&gt;buffer_data = <a class="code" href="vdo-buffer_8h.html#a3d39e2466d23b62e52a0fbfd10a968a3">vdo_buffer_get_data</a>(buffer_in);</div><div class="line">opaque_in-&gt;framework_data = 0x12345678;</div><div class="line"><a class="code" href="vdo-stream_8h.html#a897b1e6d50e00aa8974511b4625cbad3">vdo_stream_buffer_enqueue</a>(stream, buffer_in);</div><div class="line"></div><div class="line"><span class="comment">// Retrieve filled Buffer</span></div><div class="line">VdoBuffer *buffer_out = <a class="code" href="vdo-stream_8h.html#a021f68451699a9ca04aa0e67d9b2917e">vdo_stream_get_buffer</a>(stream, NULL);</div><div class="line">external_framework_t *opaque_out = <a class="code" href="vdo-frame_8h.html#a6d7eb626d1bf4a2d4ab5173f5a1efc84">vdo_frame_get_opaque</a>(buffer_out);</div><div class="line"></div><div class="line">assert(opaque_in == opaque_out);</div></div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>A VdoBuffer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the opaque user provided information </dd></dl>

</div>
</div>
<a id="ab0826cd3642b0cf662c69d84cbaaa2a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0826cd3642b0cf662c69d84cbaaa2a0">&#9670;&nbsp;</a></span>vdo_buffer_is_complete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gboolean vdo_buffer_is_complete </td>
          <td>(</td>
          <td class="paramtype">VdoBuffer *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Indicates whether the buffer is complete or not. </p>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000003">Deprecated:</a></b></dt><dd>All buffers are complete.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>A VdoBuffer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>TRUE</code> means complete, <code>FALSE</code> means incomplete </dd></dl>

</div>
</div>
<a id="ad35e3382fa9f9bb4024af62cec90b034"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad35e3382fa9f9bb4024af62cec90b034">&#9670;&nbsp;</a></span>vdo_buffer_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VdoBuffer* vdo_buffer_new </td>
          <td>(</td>
          <td class="paramtype">gint&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gsize&#160;</td>
          <td class="paramname"><em>capacity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">guint64&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gpointer&#160;</td>
          <td class="paramname"><em>opaque</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a buffer which is owned by an external framework. </p>
<p>Default: VDO_BUFFER_ACCESS_CPU_RD (suitable for normal consumers) The <code>fd</code> will not be closed by g_object_unref.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>A mmap compatible file descriptor </td></tr>
    <tr><td class="paramname">capacity</td><td>The buffer capacity </td></tr>
    <tr><td class="paramname">offset</td><td>The offset to the start of the buffer </td></tr>
    <tr><td class="paramname">opaque</td><td>The opaque custom information associated with the buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A VdoBuffer. Free with <code>g_object_unref()</code>. </dd></dl>

</div>
</div>
<a id="a097843481f6052a45fa46a6ca359750a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a097843481f6052a45fa46a6ca359750a">&#9670;&nbsp;</a></span>vdo_buffer_new_full()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VdoBuffer* vdo_buffer_new_full </td>
          <td>(</td>
          <td class="paramtype">gint&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gsize&#160;</td>
          <td class="paramname"><em>capacity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">guint64&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gpointer&#160;</td>
          <td class="paramname"><em>opaque</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classVdoMap.html">VdoMap</a> *&#160;</td>
          <td class="paramname"><em>settings</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a buffer with custom buffer properties. </p>
<p>Default: VDO_BUFFER_ACCESS_ANY_RW (suitable for producers) The <code>fd</code> will not be closed by g_object_unref.</p>
<div class="fragment"><div class="line"><a class="code" href="classVdoMap.html">VdoMap</a> *settings = <a class="code" href="vdo-map_8h.html#a98b0e304d19d397003f2cc0c774cc33f">vdo_map_new</a>();</div><div class="line">vdo_map_set_uint32(settings, <span class="stringliteral">&quot;buffer.access&quot;</span>, <a class="code" href="vdo-types_8h.html#aad3ddf92456cf91539f2f21814083ecfa7205d31a0292710ba7fd7122ade39fbe">VDO_BUFFER_ACCESS_ANY_RW</a>);</div><div class="line"></div><div class="line">VdoBuffer *buffer = <a class="code" href="vdo-buffer_8h.html#a097843481f6052a45fa46a6ca359750a">vdo_buffer_new_full</a>(fd, capacity, 0, NULL, settings);</div></div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>A mmap compatible file descriptor </td></tr>
    <tr><td class="paramname">capacity</td><td>The buffer capacity </td></tr>
    <tr><td class="paramname">offset</td><td>The offset to the start of the buffer </td></tr>
    <tr><td class="paramname">opaque</td><td>The opaque custom information associated with the buffer </td></tr>
    <tr><td class="paramname">settings</td><td>Override default buffer properties such as VdoBufferAccess</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A VdoBuffer. Free with <code>g_object_unref()</code>. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="vdo-buffer_8h.html">vdo-buffer.h</a></li>
    <li class="footer">Copyright &copy; 2009-2023 Axis Communications AB. All rights reserved.</li>
  </ul>
</div>
</body>
</html>
